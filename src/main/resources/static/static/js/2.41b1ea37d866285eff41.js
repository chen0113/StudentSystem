webpackJsonp([2],{U67u:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"page",data:function(){return{loading:!1,cascaderValue:["hehe","hah"],cascaderOptions:[],style:{height:window.innerHeight+"px"},dialogTitle:"",dialogFormVisible:!1,formLabelWidth:"120px",studentList:[{studentId:"1",studentName:"老何",studentSex:"女",grade:"2013",classId:"01",majorId:"02",majorName:"计算机",departmentId:"03",departmentName:"计算机与信息"},{studentId:"2",studentName:"张三",studentSex:"男",grade:"2013",classId:"02",majorId:"02",majorName:"美术",departmentId:"02",departmentName:"美术学院"}],student:{studentId:"",studentName:"",studentSex:"",grade:"",classId:"",majorId:"",majorName:"",departmentId:"",departmentName:""},searchData:{studentId:"",majorName:"",studentName:"",departmentName:""},pageInfo:{total:100,pageSize:15,pageNum:1}}},methods:{handlePageChange:function(t){this.pageInfo.pageNum=t,this.getStudentList()},addStudent:function(){this.dialogFormVisible=!0,this.student={},this.dialogTitle="添加学生"},commitMessage:function(){var t=this;if("修改信息"===this.dialogTitle){this.loading=!0;var e=this.student;this._ajax("post","/student/management/update",function(e){console.log(e),t.loading=!1,t.dialogFormVisible=!1,t._notify("成功","success","修改成功")},{},function(e){console.log(e),t.loading=!1,t.dialogFormVisible=!1,t._notify("警告","warning","修改失败")},function(e){console.log(e),t.loading=!1,t.dialogFormVisible=!1,t._notify("错误","error","请求错误")},e)}else{this.loading=!0;var a=this.student;this._ajax("post","/student/management/add",function(e){console.log(e),t.loading=!1,t.dialogFormVisible=!1,t._notify("成功","success","添加成功")},{},function(e){console.log(e),t.loading=!1,t.dialogFormVisible=!1,t._notify("警告","warning","添加失败")},function(e){console.log(e),t.loading=!1,t.dialogFormVisible=!1,t._notify("错误","error","请求错误")},a)}},majorDepartmentInfo:function(t){var e=this;this.cascaderOptions.forEach(function(t){t.value===e.cascaderValue[0]&&(e.student.departmentId=t.id,t.children.forEach(function(t){t.value===e.cascaderValue[1]&&(e.student.majorId=t.id)}))}),this.student.departmentName=this.cascaderValue[0],this.student.majorName=this.cascaderValue[1],console.log(this.cascaderValue)},updateStudent:function(t){this.dialogFormVisible=!0,this.student=t,this.dialogTitle="修改信息",this.cascaderValue.splice(0,this.cascaderValue.length)},deleteStudent:function(t){var e=this;this._confirm("您确定删除它吗？",function(){var a=t.studentId,n=function(t){console.log(t),e._alert("删除成功！","success",2e3),e.getStudentList()};e._ajax("post","/student/management/delete",n,{id:a},function(t){console.log(t)},function(){},{"Content-Type":"application/x-www-form-urlencoded"})},function(){e._alert("已取消","info",2e3)})},search:function(){var t=this;if(""===this.searchData.studentId&&""===this.searchData.studentName&&""===this.searchData.majorName&&""===this.searchData.departmentName)this.getStudentList();else{var e=this.searchData;this._ajax("post","/student/management/search",function(e){console.log(e),t.studentList=e.charData},{},function(t){console.log(t)},function(){},e)}},examineAll:function(){this.searchData={}},getStudentList:function(){var t=this,e=this.pageInfo;this._ajax("get","/student/management/list",function(e){t.studentList=e.charData.list,t.pageInfo.pageSize=e.charData.pageSize,t.pageInfo.total=e.charData.total},e,function(t){console.log(t)},function(){})},getMajorDepartmentInfo:function(){var t=this;this._ajax("get","/major/management/webList",function(e){t.cascaderOptions=e.charData},{},function(t){console.log(t)},function(){})}},mounted:function(){console.log(this.platform),this.getStudentList(),this.getMajorDepartmentInfo()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:t.style},[a("div",{staticStyle:{"margin-bottom":"25px"}},[a("i",{staticClass:"el-icon-plus"}),a("span",[t._v("添加")]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.addStudent()}}},[t._v("添加")])],1)]),t._v(" "),a("div",[a("div",[a("i",{staticClass:"el-icon-search"}),a("span",[t._v("查询")]),t._v(" "),a("div",{staticClass:"searchContent",staticStyle:{"margin-top":"10px"}},[a("el-form",{attrs:{model:t.searchData,inline:""}},[a("el-form-item",{attrs:{label:"学号:"}},[a("el-input",{model:{value:t.searchData.studentId,callback:function(e){t.$set(t.searchData,"studentId","string"==typeof e?e.trim():e)},expression:"searchData.studentId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名:"}},[a("el-input",{model:{value:t.searchData.studentName,callback:function(e){t.$set(t.searchData,"studentName","string"==typeof e?e.trim():e)},expression:"searchData.studentName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"专业名称:"}},[a("el-input",{model:{value:t.searchData.majorName,callback:function(e){t.$set(t.searchData,"majorName","string"==typeof e?e.trim():e)},expression:"searchData.majorName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"学院名称:"}},[a("el-input",{model:{value:t.searchData.departmentName,callback:function(e){t.$set(t.searchData,"departmentName","string"==typeof e?e.trim():e)},expression:"searchData.departmentName"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"success",plain:""},on:{click:t.examineAll}},[t._v("重置")])],1)],1)],1)]),t._v(" "),t._m(0)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.studentList,height:"100%"}},[a("el-table-column",{attrs:{fixed:"",prop:"studentId",label:"学号"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"studentName",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"studentSex",label:"性别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"grade",label:"年级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"classId",label:"班级号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"majorName",label:"专业名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"departmentName",label:"学院"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.updateStudent(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteStudent(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pageInfo.total,"page-size":t.pageInfo.pageSize,"current-page":t.pageInfo.pageNum},on:{"current-change":t.handlePageChange}}),t._v(" "),a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:t.dialogTitle,visible:t.dialogFormVisible,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},["修改信息"===t.dialogTitle?a("div",[a("el-form",{attrs:{model:t.student}},[a("el-form-item",{attrs:{label:"学号","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on",size:"normal",disabled:""},model:{value:t.student.studentId,callback:function(e){t.$set(t.student,"studentId",e)},expression:"student.studentId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on",disabled:""},model:{value:t.student.studentName,callback:function(e){t.$set(t.student,"studentName",e)},expression:"student.studentName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":t.formLabelWidth}},[a("el-radio-group",{attrs:{size:"small",disabled:""},model:{value:t.student.studentSex,callback:function(e){t.$set(t.student,"studentSex",e)},expression:"student.studentSex"}},[a("el-radio",{attrs:{label:"男",border:""}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:"女",border:""}},[t._v("女")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"年级","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on"},model:{value:t.student.grade,callback:function(e){t.$set(t.student,"grade",e)},expression:"student.grade"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"班级号","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on"},model:{value:t.student.classId,callback:function(e){t.$set(t.student,"classId",e)},expression:"student.classId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"专业-学院","label-width":t.formLabelWidth}},[a("el-cascader",{attrs:{options:t.cascaderOptions,placeholder:"如不修改则无需选择",props:{expandTrigger:"hover"}},on:{change:function(e){return t.majorDepartmentInfo()}},model:{value:t.cascaderValue,callback:function(e){t.cascaderValue=e},expression:"cascaderValue"}})],1)],1)],1):a("div",[a("el-form",{attrs:{model:t.student}},[a("el-form-item",{attrs:{label:"学号","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on",size:"normal"},model:{value:t.student.studentId,callback:function(e){t.$set(t.student,"studentId",e)},expression:"student.studentId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on"},model:{value:t.student.studentName,callback:function(e){t.$set(t.student,"studentName",e)},expression:"student.studentName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":t.formLabelWidth}},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.student.studentSex,callback:function(e){t.$set(t.student,"studentSex",e)},expression:"student.studentSex"}},[a("el-radio",{attrs:{label:"男",border:""}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:"女",border:""}},[t._v("女")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"年级","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on"},model:{value:t.student.grade,callback:function(e){t.$set(t.student,"grade",e)},expression:"student.grade"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"班级号","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"on"},model:{value:t.student.classId,callback:function(e){t.$set(t.student,"classId",e)},expression:"student.classId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"专业-学院","label-width":t.formLabelWidth}},[a("el-cascader",{attrs:{options:t.cascaderOptions,placeholder:"请选择",props:{expandTrigger:"hover"}},on:{change:function(e){return t.majorDepartmentInfo()}},model:{value:t.cascaderValue,callback:function(e){t.cascaderValue=e},expression:"cascaderValue"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.commitMessage()}}},[t._v("确 定")])],1)])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",[e("i",{staticClass:"el-icon-document"},[e("span",[this._v("学生列表")])])])])}]};var s=a("C7Lr")(n,l,!1,function(t){a("lhxU")},"data-v-7ae96e14",null).exports;e.default=s},lhxU:function(t,e){}});
//# sourceMappingURL=2.41b1ea37d866285eff41.js.map